var InlineEditingInputFunctions={display:function(f){var e=$(f),d=$("#nc-inline-input-form"),c=d.find("input");if(d.data("originalControl")!=undefined){InlineEditingInputFunctions.cancel()}d.data("originalControl",e);c.removeClass("field-validation-error");d.insertAfter(e);d.show().css("display","inline-block");c.val(e.text()==e.data("emptyvalue")?"":e.text());setTimeout(function(){c.focus()},10);InlineEditingInputFunctions.setEmptyValue();$(".nc-inline-input").show();var b=d.prev(".nc-inline-input");var a=b.data("display-callback");executeFunctionByName(a,window,b);e.hide()},cancel:function(){var c=$("#nc-inline-input-form"),d=c.data("originalControl");var b=c.prev(".nc-inline-input");var a=b.data("cancel-callback");executeFunctionByName(a,window,b);if(c.is(":visible")){$(".project-board-section-container").append(c);c.hide()}c.removeData("originalControl");if(d!=undefined){d.show()}},save:function(){var c=$("#nc-inline-input-form"),b=c.find("input");var f=b.val();var a=c.prev(".nc-inline-input");var e=a.data("url");var d=a.data("saveandnew");Nutcache.Ajax.TryAjaxCall({url:e,contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify({value:f}),dataType:"json",success:function(g){if(g.IsSaved){InlineEditingInputFunctions.setEmptyValue(a);b.val("");var h=a.data("success-callback");executeFunctionByName(h,window,g);if(d){InlineEditingInputFunctions.display(a)}else{InlineEditingInputFunctions.cancel()}}else{b.addClass("field-validation-error");LoadMessagesSection(g.Messages,"#floating-message-window")}},})},setEmptyValue:function(a){if($(a).text()==""){$(a).text($(a).data("emptyvalue"))}},setEmptyValues:function(){$(".nc-inline-input").each(function(){InlineEditingInputFunctions.setEmptyValue($(this))})},initialize:function(){$(document).off("click",".nc-inline-input").on("click",".nc-inline-input",function(a){InlineEditingInputFunctions.display(this);a.preventDefault()});$(document).off("keydown","#nc-inline-input-form input").on("keydown","#nc-inline-input-form input",function(a){var b=(a.keyCode?a.keyCode:a.which);if(b==13){InlineEditingInputFunctions.save()}else{if(b==27){InlineEditingInputFunctions.cancel()}}});InlineEditingInputFunctions.setEmptyValues()}};var InlineEditingTextareaFunctions={display:function(b){var a=$(b),d=$("#nc-inline-textarea-form"),c=d.find("textarea");if(d.data("originalControl")!=undefined){InlineEditingTextareaFunctions.cancel()}d.data("originalControl",a);c.removeClass("field-validation-error");d.insertAfter($(b));d.show();c.val(a.text()==a.data("emptyvalue")?"":a.text());setTimeout(function(){c.focus()},10);InlineEditingTextareaFunctions.setEmptyValue();$(".nc-inline-textarea").show();c.prev().find("span").text(c.val());a.hide()},cancel:function(a){if(a==undefined||$(a).find("#nc-inline-textarea-form").length){var c=$("#nc-inline-textarea-form"),b=c.data("originalControl");if(c.is(":visible")){$("body").append(c);c.hide()}c.removeData("originalControl");if(b!=undefined){b.show();executeFunctionByName(b.data("cancel-callback"),window,b)}}},save:function(){var c=$("#nc-inline-textarea-form"),d=c.find("textarea");var f=d.val();var a=c.prev(".nc-inline-textarea");var e=a.data("url");var b=a.data("saveandnew");Nutcache.Ajax.TryAjaxCall({url:e,contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify({value:f}),dataType:"json",success:function(g){if(g.IsSaved){InlineEditingTextareaFunctions.setEmptyValue(a);d.val("");var h=a.data("success-callback");executeFunctionByName(h,window,g);if(b){InlineEditingTextareaFunctions.display(a)}else{InlineEditingTextareaFunctions.cancel()}}else{d.addClass("field-validation-error");LoadMessagesSection(g.Messages,"#floating-message-window")}},})},setEmptyValue:function(a){if($(a).text()==""){$(a).text($(a).data("emptyvalue"))}},setEmptyValues:function(){$(".nc-inline-textarea").each(function(){InlineEditingTextareaFunctions.setEmptyValue($(this))})},initialize:function(){$(document).off("click",".nc-inline-textarea").on("click",".nc-inline-textarea",function(a){InlineEditingTextareaFunctions.display(this);a.preventDefault()});$(document).off("keydown","#nc-inline-textarea-form textarea").on("keydown","#nc-inline-textarea-form textarea",function(b){var c=(b.keyCode?b.keyCode:b.which);if(c==13){var a=$("#nc-inline-textarea-form").prev(".nc-inline-textarea");var d=a.data("saveonreturn");if(b.ctrlKey||d){InlineEditingTextareaFunctions.save();b.preventDefault()}}else{if(c==27){InlineEditingTextareaFunctions.cancel()}}});InlineEditingTextareaFunctions.setEmptyValues();$("#nc-inline-textarea-form textarea").flexText()}};var InlineEditingRichTextAreaFunctions={display:function(d){var a=$(d);if(a.data("isOpened")){return}a.data("isOpened",true);var c=$("#nc-inline-richtextarea-form");if(c.data("originalControl")!=undefined){InlineEditingRichTextAreaFunctions.cancel()}c.data("originalControl",a);c.insertAfter(a);c.find(".k-editable-area").removeClass("field-validation-error");c.show();var b=$("textarea",c).data("kendoEditor");b.refresh();b.value(a.text()==a.data("emptyvalue")?"":a.html());setTimeout(function(){b.focus();var e=c[0];if(!Nutcache.Positioning.isElementInViewport(e)){e.scrollIntoView()}},10);InlineEditingRichTextAreaFunctions.setEmptyValue();$(".nc-inline-richtextarea").show();a.hide()},cancel:function(a){if(a==undefined||$(a).find("#nc-inline-richtextarea-form").length){var c=$("#nc-inline-richtextarea-form"),b=c.data("originalControl");if(c.is(":visible")){$("body").append(c);c.hide()}c.removeData("originalControl");if(b!=undefined){b.show();b.data("isOpened",false);executeFunctionByName(b.data("cancel-callback"),window,b)}}},save:function(){var c=$("#nc-inline-richtextarea-form");var b=c.find("textarea").data("kendoEditor");b.value(InlineEditingRichTextAreaFunctions.autoLinkUrls(b.value()));var f=b.encodedValue();var a=c.data("originalControl");var e=a.data("url");var d=a.data("saveandnew");Nutcache.Ajax.TryAjaxCall({url:e,contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify({value:f}),dataType:"json",success:function(g){if(g.IsSaved){b.value("");InlineEditingRichTextAreaFunctions.setEmptyValue(a);var h=a.data("success-callback");executeFunctionByName(h,window,g);if(d){InlineEditingRichTextAreaFunctions.display(a)}else{InlineEditingRichTextAreaFunctions.cancel()}}else{c.find(".k-editable-area").addClass("field-validation-error");LoadMessagesSection(g.Messages,"#floating-message-window")}},})},setEmptyValue:function(a){if($(a).text()==""){$(a).text($(a).data("emptyvalue"))}},setEmptyValues:function(){$(".nc-inline-richtextarea").each(function(){InlineEditingRichTextAreaFunctions.setEmptyValue($(this))})},initialize:function(){$(document).off("click",".nc-inline-richtextarea").on("click",".nc-inline-richtextarea",function(a){InlineEditingRichTextAreaFunctions.display(this);a.preventDefault()});$(document).off("keydown","#nc-inline-richtextarea-form textarea").on("keydown","#nc-inline-richtextarea-form textarea",function(b){var c=(b.keyCode?b.keyCode:b.which);if(c==13){var a=$("#nc-inline-richtextarea-form").prev(".nc-inline-richtextarea");var d=a.data("saveonreturn");if(b.ctrlKey||d){InlineEditingRichTextAreaFunctions.save();b.preventDefault()}}else{if(c==27){InlineEditingRichTextAreaFunctions.cancel()}}});InlineEditingRichTextAreaFunctions.setEmptyValues()},pasteHandler:function(a){a.html=InlineEditingRichTextAreaFunctions.autoLinkUrls(a.html)},autoLinkUrls:function(a){return Autolinker.link(a,{stripPrefix:false,email:true,phone:true,twitter:false,hashtag:false})}};var InlineEditingDropDownListFunctions={display:function(d){var c=$(d),b=$("#nc-inline-dropdownlist-form");if(b.data("originalControl")!=undefined){InlineEditingDropDownListFunctions.cancel()}b.data("originalControl",c);b.find(".k-dropdown").removeClass("field-validation-error");b.insertAfter(c);b.show().css("display","inline-block");InlineEditingDropDownListFunctions.setOptions(d);var a=b.find("input").data("kendoDropDownList");if(c.data("id")!=""){a.value(c.data("id"))}$(".nc-inline-dropdownlist").show();c.hide()},cancel:function(a){if(a==undefined||$(a).find("#nc-inline-dropdownlist-form").length){var b=$("#nc-inline-dropdownlist-form"),c=b.data("originalControl");if(b.is(":visible")){$("body").append(b);b.hide()}b.removeData("originalControl");if(c!=undefined){c.show()}}},save:function(d){var c=$("#nc-inline-dropdownlist-form input").data("kendoDropDownList");var b=c.dataItem(d.item.index());var i=b.ID;var f=$("#nc-inline-dropdownlist-form").prev(".nc-inline-dropdownlist");var h=f.data("url");var g=f.data("saveandnew");if(i==-2){var a=f.data("add-new-callback");InlineEditingDropDownListFunctions.cancel();InlineEditingDropDownListFunctions.setEmptyValue(f);executeFunctionByName(a,window);return}Nutcache.Ajax.TryAjaxCall({url:h,contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify({value:i}),dataType:"json",success:function(e){if(e.IsSaved){InlineEditingDropDownListFunctions.cancel();InlineEditingDropDownListFunctions.setEmptyValue(f);c.value("");var j=f.data("success-callback");executeFunctionByName(j,window,e);if(g){InlineEditingDropDownListFunctions.display(f)}}else{$("#nc-inline-dropdownlist-form .k-dropdown").addClass("field-validation-error");LoadMessagesSection(e.Messages,"#floating-message-window")}},})},setEmptyValue:function(a){if($(a).text()==""){$(a).text($(a).data("emptyvalue"))}},setEmptyValues:function(){$(".nc-inline-dropdownlist").each(function(){InlineEditingDropDownListFunctions.setEmptyValue($(this))})},setOptions:function(d){var b=$("#nc-inline-dropdownlist-form input").data("kendoDropDownList");var a=new kendo.data.DataSource({transport:{read:{url:$(d).data("lookupurl"),dataType:"json",data:$(d).data("lookupparams")}},serverFiltering:true});b.setDataSource(a);InlineEditingDropDownListFunctions.setEmptyValue();var c=b.options;var e=$(d).data("templateid");if(e!=null&&e!=""){c.template=kendo.template($("#"+e).html());c.valueTemplate=kendo.template($("#"+e).html())}c.filter="contains";c.delay=10;b.setOptions(c)},initialize:function(){$(document).off("click",".nc-inline-dropdownlist").on("click",".nc-inline-dropdownlist",function(a){InlineEditingDropDownListFunctions.display(this);a.preventDefault()});InlineEditingDropDownListFunctions.setEmptyValues()}};var InlineEditingDatePickerFunctions={display:function(b){$("#nc-inline-datepicker-form #nc-datepicker").removeClass("field-validation-error");$("#nc-inline-datepicker-form").insertAfter($(b));$("#nc-inline-datepicker-form").show();$(".nc-inline-datepicker").show();$(b).hide();var a=$("#nc-datepicker").data("kendoDatePicker");a.value($(b).text()==$(b).data("emptyvalue")?"":$(b).text());a.open();$("#nc-datepicker_dateview .k-calendar .k-footer").replaceWith('<div class="k-footer"><a href="#" class="clear-date" onclick="InlineEditingDatePickerFunctions.clear();return false;">'+clearDate+"</a></div>")},cancel:function(){$(".project-board-section-container").append($("#nc-inline-datepicker-form"));$("#nc-inline-datepicker-form").hide();$(".nc-inline-datepicker").show()},clear:function(b){var a=$("#nc-datepicker").data("kendoDatePicker");a.close();InlineEditingDatePickerFunctions.save(b,null);a.value("")},save:function(c,a){var e=(typeof a!="undefined")?a:Nutcache.Dates.ToISODateString(this.value());var b=$("#nc-inline-datepicker-form").prev(".nc-inline-datepicker");var d=b.data("url");Nutcache.Ajax.TryAjaxCall({url:d,contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify({value:e}),dataType:"json",success:function(f){if(f.IsSaved){InlineEditingDatePickerFunctions.cancel();var g=$("#nc-inline-datepicker-form #nc-datepicker").data("kendoDatePicker").options.format;var h=Nutcache.Dates.ConvertServerDateToLocalDateWithFormat(f.Content.Date,null,"{0:"+g+"}");b.text(h);var i=b.data("success-callback");executeFunctionByName(i,window,f);InlineEditingDatePickerFunctions.setEmptyValue(b)}else{$("#nc-inline-datepicker-form #nc-datepicker").addClass("field-validation-error");LoadMessagesSection(f.Messages,"#floating-message-window")}},})},setEmptyValue:function(a){if($(a).text()==""){$(a).text($(a).data("emptyvalue"))}},setEmptyValues:function(){$(".nc-inline-datepicker").each(function(){InlineEditingDatePickerFunctions.setEmptyValue($(this))})},initialize:function(){$(document).off("click",".nc-inline-datepicker").on("click",".nc-inline-datepicker",function(a){InlineEditingDatePickerFunctions.display(this);a.preventDefault()});$(document).off("keydown","#nc-inline-datepicker-form #nc-datepicker").on("keydown","#nc-inline-datepicker-form #nc-datepicker",function(a){var b=(a.keyCode?a.keyCode:a.which);if(b==13){InlineEditingDatePickerFunctions.save(null,$("#nc-inline-datepicker-form #nc-datepicker").val())}else{if(b==27){InlineEditingDatePickerFunctions.cancel()}}});InlineEditingDatePickerFunctions.setEmptyValues()}};var InlineEditingInputTimeFunctions={display:function(e){var d=$(e),c=$("#nc-inline-inputtime-form"),b=c.find("#nc-inputtime-hours");if(c.data("originalControl")!=undefined){InlineEditingInputTimeFunctions.cancel()}c.data("originalControl",d);b.removeClass("field-validation-error");c.insertAfter(d);if(d.data("orientation")=="vertical"&&!c.find(".timer-hours-actions").length){c.find(".nc-inline-inputtime-form-container").append('<div class="timer-hours-actions"></div>');var a=c.find(".timer-hours-actions");a.append($("#nc-inputtime-hours-help"));a.append($("#nc-inline-inputtime-form .inline"))}c.show();if(d.text()!=d.data("emptyvalue")){var f=d.data("value");b.val(f)}else{b.val("")}b.focus();b.select();InlineEditingInputFunctions.setEmptyValue();$(".nc-inline-inputtime").show();d.hide();executeFunctionByName(d.data("display-callback"),window,e)},cancel:function(a){if(a==undefined||$(a).find("#nc-inline-inputtime-form").length){var b=$("#nc-inline-inputtime-form"),c=b.data("originalControl");if(b.is(":visible")){$("body").append(b);b.hide()}b.removeData("originalControl");if(c!=undefined){c.show();executeFunctionByName(c.data("cancel-callback"),window,c)}}},clear:function(a){InlineEditingInputTimeFunctions.save()},save:function(){var b=Nutcache.Time.GetDecimalValueFromString($("#nc-inline-inputtime-form #nc-inputtime-hours").val());var a=$("#nc-inline-inputtime-form").prev(".nc-inline-inputtime");Nutcache.Ajax.TryAjaxCall({url:a.data("url"),contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify({hours:b}),dataType:"json",success:function(c){if(c.IsSaved){var d=a.data("success-callback");executeFunctionByName(d,window,c);InlineEditingInputTimeFunctions.cancel();InlineEditingInputTimeFunctions.setEmptyValue(a);$("#nc-inline-inputtime-form #nc-inputtime-hours").val("")}else{$("#nc-inline-inputtime-form #nc-inputtime-hours").addClass("field-validation-error");LoadMessagesSection(c.Messages,"#floating-message-window")}},})},setEmptyValue:function(a){if($(a).text()==""){$(a).text($(a).data("emptyvalue"))}},setEmptyValues:function(){$(".nc-inline-inputtime").each(function(){InlineEditingInputTimeFunctions.setEmptyValue($(this))})},initialize:function(){$(document).off("click",".nc-inline-inputtime").on("click",".nc-inline-inputtime",function(a){InlineEditingInputTimeFunctions.display(this);a.preventDefault()});$(document).off("keydown","#nc-inline-inputtime-form #nc-inputtime-hours").on("keydown","#nc-inline-inputtime-form #nc-inputtime-hours",function(a){var b=(a.keyCode?a.keyCode:a.which);if(b==13){InlineEditingInputTimeFunctions.save()}else{if(b==27){InlineEditingInputTimeFunctions.cancel()}}});InlineEditingInputTimeFunctions.setEmptyValues()}};var InlineEditingTimePickerFunctions={display:function(b){var a=$(b),e=$("#nc-inline-timepicker-form"),d=e.find("#nc-timepicker");if(e.data("originalControl")!=undefined){InlineEditingTimePickerFunctions.cancel()}e.data("originalControl",a);d.removeClass("field-validation-error");e.insertAfter(a);e.show();$(".nc-inline-timepicker").show();a.hide();var c=d.data("kendoTimePicker");c.value(a.text()==a.data("emptyvalue")?"":a.text());d.select()},cancel:function(a){if(a==undefined||$(a).find("#nc-inline-timepicker-form").length){var c=$("#nc-inline-timepicker-form"),b=c.data("originalControl");if(c.is(":visible")){$("body").append(c);c.hide()}c.removeData("originalControl");if(b!=undefined){b.show();executeFunctionByName(b.data("cancel-callback"),window,b)}}},clear:function(a){var b=$("#nc-timepicker").data("kendoTimePicker");b.close();InlineEditingTimePickerFunctions.save(a,null);b.value("")},save:function(c,a){var d=$("#nc-timepicker").data("kendoTimePicker");var f=Nutcache.Dates.ToDateTimeString(d.value(),Nutcache.Dates.isoDateTimeFormatString);var b=$("#nc-inline-timepicker-form").prev(".nc-inline-timepicker");var e=b.data("url");Nutcache.Ajax.TryAjaxCall({url:e,contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify({value:f}),dataType:"json",success:function(g){if(g.IsSaved){InlineEditingTimePickerFunctions.cancel();var h=$("#nc-inline-timepicker-form #nc-timepicker").data("kendoTimePicker").options.format;var i=Nutcache.Dates.ConvertServerDateToLocalDateWithFormat(g.Content.Date,null,"{0:"+h+"}");b.text(i);var j=b.data("success-callback");executeFunctionByName(j,window,g);InlineEditingTimePickerFunctions.setEmptyValue(b)}else{$("#nc-inline-timepicker-form #nc-timepicker").addClass("field-validation-error");LoadMessagesSection(g.Messages,"#floating-message-window")}},})},setEmptyValue:function(a){if($(a).text()==""){$(a).text($(a).data("emptyvalue"))}},setEmptyValues:function(){$(".nc-inline-timepicker").each(function(){InlineEditingTimePickerFunctions.setEmptyValue($(this))})},initialize:function(){$(document).off("click",".nc-inline-timepicker").on("click",".nc-inline-timepicker",function(a){InlineEditingTimePickerFunctions.display(this);a.preventDefault()});$(document).off("keydown","#nc-inline-timepicker-form #nc-timepicker").on("keydown","#nc-inline-timepicker-form #nc-timepicker",function(a){var b=(a.keyCode?a.keyCode:a.which);if(b==13){InlineEditingTimePickerFunctions.save(null,$("#nc-inline-timepicker-form #nc-timepicker").val())}else{if(b==27){InlineEditingTimePickerFunctions.cancel()}}});InlineEditingTimePickerFunctions.setEmptyValues()}};$(function(){InlineEditingInputFunctions.initialize();InlineEditingTextareaFunctions.initialize();InlineEditingDropDownListFunctions.initialize();InlineEditingDatePickerFunctions.initialize();InlineEditingInputTimeFunctions.initialize();InlineEditingTimePickerFunctions.initialize();InlineEditingRichTextAreaFunctions.initialize();$(document).click(function(a){var j=$("#nc-inline-input-form");var i=$(".nc-inline-input");if(!j.is(a.target)&&j.has(a.target).length===0&&!i.is(a.target)&&i.has(a.target).length===0){InlineEditingInputFunctions.cancel()}var d=$("#nc-inline-datepicker-form");var b=$(".nc-inline-datepicker");var c=$("#nc-datepicker_dateview");if(!d.is(a.target)&&d.has(a.target).length===0&&!b.is(a.target)&&b.has(a.target).length===0&&!c.is(a.target)&&c.has(a.target).length===0){InlineEditingDatePickerFunctions.cancel()}var g=$("#nc-inline-dropdownlist-form");var f=$(".nc-inline-dropdownlist");var h=$("#nc-dropdownlist-list");if(!g.is(a.target)&&g.has(a.target).length===0&&!f.is(a.target)&&f.has(a.target).length===0&&!h.is(a.target)&&h.has(a.target).length===0){InlineEditingDropDownListFunctions.cancel()}var l=$("#nc-inline-inputtime-form");var k=$(".nc-inline-inputtime");if(!l.is(a.target)&&l.has(a.target).length===0&&!k.is(a.target)&&k.has(a.target).length===0){InlineEditingInputTimeFunctions.cancel()}var n=$("#nc-inline-timepicker-form");var m=$(".nc-inline-timepicker");var o=$("#nc-timepicker_timeview");if(!n.is(a.target)&&n.has(a.target).length===0&&!o.is(a.target)&&o.has(a.target).length===0&&!m.is(a.target)&&m.has(a.target).length===0){InlineEditingTimePickerFunctions.cancel()}})});