var ID_ALL=-1;var ID_NEW=-2;var ID_UNDEFINED=-3;var Nutcache=$.extend(true,Nutcache,{Context:{},AutoCallback:{addSingleCall:function(a){if(!a){return}var b=JSON.parse(sessionStorage.getItem("nutcache-next-load-callbacks"))||[];b.push(Nutcache.AutoCallback.createCallback.apply(this,arguments));sessionStorage.setItem("nutcache-next-load-callbacks",JSON.stringify(b))},performCalls:function(){var e=sessionStorage.getItem("nutcache-next-load-callbacks");if(e!=null){var a=JSON.parse(e);if($.isArray(a)){sessionStorage.removeItem("nutcache-next-load-callbacks");var d=a.length;for(var b=0;b<d;b++){Nutcache.AutoCallback.executeCallback(a[b])}}}},createCallback:function(a){if(!a){return null}if($.isPlainObject(a)&&a.callback){return a}return{callback:a.toString(),args:JSON.stringify([].slice.call(arguments).splice(1))}},executeCallback:function(callback){if(!callback){return null}if($.isFunction(callback)){return callback()}if($.isPlainObject(callback)&&callback.callback){try{var func=eval("("+callback.callback+")");if($.isFunction(func)){var args=JSON.parse(callback.args);return func.apply(this,args)}}catch(err){if(window.console&&window.console.error){window.console.error(err)}}}return null}},Ajax:{InProgress:false,AjaxCallDictionnary:{},TryAjaxCall:function(e,d){var a=e.url||"defaultUrl";d=typeof(d)==="undefined"?false:(d===true?true:false);var b=Nutcache.Ajax.AjaxCallDictionnary[a]||(jQuery.now()-1000);if(d||(jQuery.now()-b>=1000)){Nutcache.Ajax.AjaxCallDictionnary[a]=jQuery.now();$.ajax(e).always(function(){delete Nutcache.Ajax.AjaxCallDictionnary[a]})}},QueueAjaxCall:function(b,e,a,d){if(typeof(a)!="number"){a=400}Nutcache.Ajax.ClearAjaxQueue(b);b.queue("ajax",function(){if(jQuery.isFunction(d)){d()}$.ajax(e)});var f=setTimeout(function(){b.dequeue("ajax")},a);b.attr("queueTimeOut",f)},ClearAjaxQueue:function(a){if(a.queue("ajax")!=null&&a.queue("ajax").length>0){clearTimeout(a.attr("queueTimeOut"));a.clearQueue("ajax")}}},Form:{TrySubmit:function(d,b){var a=$(d);b=typeof(b)==="undefined"?false:(b===true?true:false);if(b||(!Nutcache.Ajax.InProgress&&((typeof a.data("last_clicked")==="undefined")||(jQuery.now()-a.data("last_clicked")>=2000)))){a.data("last_clicked",jQuery.now());a.submit()}else{Nutcache.Waitingwindow.Close()}}},EventManager:{QueueEvent:function(d,e,a,b){if(d.queue(e).length>0){clearTimeout(d.attr(e+"timeOut"));d.clearQueue(e)}d.queue(e,function(){a()});var f=setTimeout(function(){d.dequeue(e)},b);d.attr(e+"timeOut",f);return this}},Strings:{Add0ToDigit:function(a){return a<10?"0"+a:""+a},hexToRGBAFunction:function(a,d){var b=Nutcache.Strings.hexToRgb(a);return"argb("+b.r+","+b.g+","+b.b+","+d+")"},hexToRgb:function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null}},Dates:{dateFormatString:getDateFormat(),dateTimeFormatString:getDateTimeFormat(),parseFormats:["yyyy-MM-dd","MM-dd-yyyy","MM/dd/yyyy","dd-MM-yyyy","dd/MM/yyyy","dd.MM.yyyy"],isoDateTimeFormatString:getISODateTimeFormat(),ConvertUTCDateToLocalDate:function(a,d){if(a!=null){var b=new Date(a);var e=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds());return e}return(d==undefined?null:d)},ConvertServerDateToLocalDate:function(a,b){var d=Nutcache.Dates.ConvertUTCDateToLocalDate(a,b);return d!=null?Nutcache.Dates.ToDateString(d):d},ConvertServerDateToLocalDateWithFormat:function(a,b,d){var e=Nutcache.Dates.ConvertUTCDateToLocalDate(a,b);return e!=null?kendo.format(d,e):e},ConvertUTCDateTimeToLocalDateTime:function(e,b,a){if(e!=null){var d=new Date(e+"");if(b!=null){return kendo.format(b,d)}return d}return(a==undefined?null:a)},ConvertToNonUTCDate:function(b){var d=new Date();var a=new Date(b);a.setHours(d.getHours());a.setMinutes(d.getMinutes());return kendo.format(getISODateTimeFormat(),a)},ConvertEpochToLocalDateTime:function(f,b,a){var e=0;if(f!=null&&!isNaN(f)){e=parseInt(f)}if(e!=0){var d=new Date(0);d.setUTCSeconds(e);return Nutcache.Dates.ToDateTimeString(d,b)}return(a==undefined?null:a)},ToISODateString:function(a){return(a==null?null:a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2))},ToUTCISODateString:function(a){return(a==null?null:a.getUTCFullYear()+"-"+("0"+(a.getUTCMonth()+1)).slice(-2)+"-"+("0"+a.getUTCDate()).slice(-2))},DateFromISOString:function(a){return(a==null||a.length==0?null:new Date(a.substr(0,4),a.substr(5,2)-1,a.substr(8,2)))},ToDateString:function(a){return kendo.format(Nutcache.Dates.dateFormatString,a)},ToDateTimeString:function(b,a){var d=a;if(d==null){d=Nutcache.Dates.dateTimeFormatString}return kendo.format(d,b)},TodayString:function(){return Nutcache.Dates.ToDateString(new Date())},Today:function(){return new Date()},YearFirstDay:function(){return new Date(new Date().getFullYear(),0,1)}},Time:{hourSeparator:"h",minuteSeparator:"m",parseFormats:["HH:mm tt","hh:mm tt","H:mm tt","h:mm tt","HH:mm","hh:mm","HH.mm","hh.mm","HH.m","hh.m","H:mm","h:mm","H.mm","h.mm","H.m","h.m","HHtt","hhtt","HH tt","hh tt","HH","hh"],CompanyTimeSpanFormat:function(){return $("#timespanFormat").length?$("#timespanFormat").val():1},CompanyTimeFormat:function(){return $("#timeFormat").length?$("#timeFormat").val():1},configureTimeSeparators:function(a,b){Nutcache.Time.hourSeparator=a;Nutcache.Time.minuteSeparator=b},GetTimeString:function(a){if(a==null){return""}return kendo.format(Nutcache.Time.CompanyTimeFormat(),a)},GetTimeSpanString:function(d){if(d==null){return""}if(parseInt(Nutcache.Time.CompanyTimeSpanFormat())==0){return kendo.toString(d,"n")}var a=Math.floor(parseFloat(d));var b=Math.round((parseFloat(d)-a)*60);return a+":"+Nutcache.Strings.Add0ToDigit(b)},GetTicksFromStringValue:function(d){var a=Math.floor(d);var b=Math.round((d-a)*60);return Nutcache.Time.GetTicks(a,b,0)},GetTicks:function(a,b,d){return(a*60*60*10000000)+(b*60*10000000)+(d*10000000)},GetHours:function(a){return ~~a},GetMinutes:function(b){var a=Math.abs(Math.round((b%1)*60));return Nutcache.Strings.Add0ToDigit(a)},GetDecimalValue:function(a,b){return Number(a)+Number(Math.round((b/60)*100)/100)},GetDecimalValueFromString:function(b){var a=Nutcache.Time.GetTotalMinutesFromString(b);return a!=null?Nutcache.Time.GetDecimalValue(Math.floor(a/60),a%60):null},GetTotalMinutesFromString:function(k){var j=":";var b=0;var f=0;var a=k.replace(Nutcache.Time.hourSeparator,"h").replace(Nutcache.Time.minuteSeparator,"m").toLowerCase();a=a.replace(/[^0-9,:,h,m,.]/g,"");if(a==""){return null}if(a.indexOf(j)!=-1){a=a.replace(/[^0-9,:]/g,"");var i=a.split(":",2);if(i.length>0){b=Number(i[0])}if(i.length>1){f=Number(i[1])}return(b*60)+f}var d=a.indexOf("h");var g=a.indexOf("m");if(d==-1&&g==-1&&a.length>0){b=kendo.parseFloat(a);if(isNaN(b)){b=0}return b*60}if(d!=-1){var e=a.substr(0,d);if(e.length>0){b=Number(e)}a=a.substr(d+1,a.length-d-1);g=a.indexOf("m")}if(g==-1&&a.length>0){f=Number(a);a=""}if(g!=-1){var h=a.substr(0,g);if(h.length>0){f=Number(h)}}return(b*60)+f},formatTimeSpanString:function(b){var a=Nutcache.Time.GetDecimalValueFromString(b);return Nutcache.Time.GetTimeSpanString(a)},},Waitingwindow:{Show:function(){Nutcache.Waitingwindow.Close();$("#waiting-window").fadeIn("fast")},Hide:function(){$("#waiting-window").stop();$("#waiting-window").fadeOut("fast")},Close:function(){$("#waiting-window").stop();$("#waiting-window").hide()}},FloatingMessage:{Close:function(){$("#floating-message-window").html("")}},KendoUI:{dropDownListWithAddNew_onChange:function(b,a,f){var e=b.value();var d=b.element.prop("previousValue");if(e==ID_NEW&&a){a()}else{if(e!=d&&f){f()}}},dropDownListWithAddNew_onOpen:function(b){var a=b.sender;var d=a.value();a.element.prop("previousValue",d)},dropDownListWithAddNewCancel:function(a){var b=a.element.prop("previousValue");if(b!=ID_NEW){a.value(b);a.refresh()}return true},dropDownListWithAddNewSuccess:function(e,b,a){var d=(e!="undefined")?e:null;b.dataSource.read().done(function(){b.value(d.ID);b.refresh();if(a){a()}})},formatDateFilter:function(a){a.element.kendoDatePicker({format:Nutcache.Dates.dateFormatString,parseFormats:Nutcache.Dates.parseFormats})},formatTimeFilter:function(a){a.element.kendoTimePicker({format:Nutcache.Time.CompanyTimeFormat(),parseFormats:Nutcache.Time.parseFormats})}},FormatInfo:{CurrencyDecimalCount:$("#currencyDecimalCount").length?$("#currencyDecimalCount").val():2,CurrencyFormat:$("#currencyFormat").length?$("#currencyFormat").val():"",CurrencySmartFormat:$("#currencySmartFormat").length?$("#currencySmartFormat").val():"",DateFormat:$("#dateFormat").length?$("#dateFormat").val():"",TimeFormat:$("#timeFormat").length?$("#timeFormat").val():"",DateTimeFormat:$("#dateTimeFormat").length?$("#dateTimeFormat").val():""},QueryString:{Referrer:function(a){if($("#referrer")!=null&&$("#referrer").val()!=undefined){var b="referrer="+$("#referrer").val();if(a){b="?"+b}else{b="&"+b}return b}return""},getUrlParameter:function(d){var b=window.location.search.substring(1);var f=b.split("&");for(var a=0;a<f.length;a++){var e=f[a].split("=");if(e[0]==d){return e[1]}}return""}},ChangeDetection:{FindChanges:function(a){if(typeof a=="string"){a=document.getElementById(a)}if(!a||!a.nodeName){return null}switch(a.nodeName.toLowerCase()){case"form":return Nutcache.ChangeDetection.FindDirtyElements(a.elements);case"div":return Nutcache.ChangeDetection.FindDirtyElements($(a).find("*"));default:return null}},FindDirtyElements:function(b){var a=[];var d=$(b).not(".skip-dirty-validation").filter(function(){return(this.nodeName.toLowerCase()=="select"||this.nodeName.toLowerCase()=="textarea"||this.nodeName.toLowerCase()=="input")&&($(this).is("[id]")||$(this).is("[name]"))});d.each(function(g,h){var e=false;switch(h.nodeName.toLowerCase()){case"select":var f=0;for(var j=0,k=h.options.length;j<k;j++){var l=h.options[j];e=e||(l.selected!=l.defaultSelected);if(l.defaultSelected){f=j}}if(e&&!h.multiple){e=(f!=h.selectedIndex)}break;case"textarea":case"input":switch(h.type.toLowerCase()){case"checkbox":case"radio":e=(h.checked!=h.defaultChecked);break;case"hidden":e=$(h).attr("data-original-value")!=undefined&&h.value!=$(h).attr("data-original-value");break;default:e=((h.value==0?"":h.value)!=(h.defaultValue==0?"":h.defaultValue));break}break}if(e){a.push(h)}});return a},FindChangesForDecimalInput:function(d,b){if(d.length){d=d[0];var a=$.inArray(d,b);if(a>-1){if(kendo.format(Nutcache.FormatInfo.CurrencyFormat,kendo.parseFloat(d.value))==kendo.format(Nutcache.FormatInfo.CurrencyFormat,kendo.parseFloat(d.defaultValue))){b.splice(a,1)}}}}},autoScroll:{AutoScrollDataObject:function(){},initializeNutcacheAutoScroll:function(a){Nutcache.autoScroll.AutoScrollDataObject.prototype.beginAutoScroll=function(){Nutcache.autoScroll.addTrackedElement(this)};Nutcache.autoScroll.AutoScrollDataObject.prototype.endAutoScroll=function(){clearInterval(this.intervalHandle);this.intervalHandle=null;Nutcache.autoScroll.removeTrackedElement(this)};this.each(function(d,f){var e=$(f);var b=$.extend(new Nutcache.autoScroll.AutoScrollDataObject(),{element:f,horizontalScroll:false,verticalScroll:false,intervalHandle:null,mouseLastPosition:{x:0,y:0},scrollThreshold:150,dragToScroll:false,dragLastPosition:{x:0,y:0},allowDragFrom:""},a);e.data("autoScroll",b);if(b.dragToScroll){var g=function(k){if(b.horizontalScroll){var i=e.scrollLeft();e.scrollLeft(i+(b.dragLastPosition.x-k.pageX)*2)}if(b.verticalScroll){var j=e.scrollTop();e.scrollTop(j+(b.dragLastPosition.y-k.pageY)*2)}b.dragLastPosition={x:k.pageX,y:k.pageY}};var h=function(i){window.removeEventListener("mouseup",h);window.removeEventListener("mousemove",g);b.dragLastPosition={x:0,y:0}};e.on("mousedown",function(i){if(i.target==this||$(i.target).is(b.allowDragFrom)){window.addEventListener("mouseup",h);window.addEventListener("mousemove",g);b.dragLastPosition={x:i.pageX,y:i.pageY}}})}});return this},trackedElements:[],addTrackedElement:function(a){if(Nutcache.autoScroll.trackedElements.indexOf(a)<0){Nutcache.autoScroll.trackedElements.push(a);if(Nutcache.autoScroll.trackedElements.length==1){window.addEventListener("mousemove",Nutcache.autoScroll.mouseTrackingListener)}}},removeTrackedElement:function(a){var b=Nutcache.autoScroll.trackedElements.indexOf(a);if(b>-1){Nutcache.autoScroll.trackedElements.splice(b,1);if(Nutcache.autoScroll.trackedElements.length==0){window.removeEventListener("mousemove",Nutcache.autoScroll.mouseTrackingListener)}}},mouseTrackingListener:function(a){$.each(Nutcache.autoScroll.trackedElements,function(d,e){var b=e;b.mouseLastPosition={x:a.pageX,y:a.pageY};if(b.intervalHandle==null){b.intervalHandle=setInterval(function(){Nutcache.autoScroll.performAutoScroll.apply(b.element)},15)}})},performAutoScroll:function(){var n=$(this),d=n.data("autoScroll"),p=n.width()/2,o=n.height()/2,e=n.scrollLeft(),f=n.scrollTop(),h=n[0].scrollWidth-n[0].clientWidth,i=n[0].scrollHeight-n[0].clientHeight,j=d.mouseLastPosition.x-(n.offset().left+p),k=d.mouseLastPosition.y-(n.offset().top+o),a=Math.min(Math.abs(j),p),b=Math.min(Math.abs(k),o),g=p-d.scrollThreshold,q=o-d.scrollThreshold,l=d.horizontalScroll&&a>g&&(j>0&&e<h||j<0&&e>0),m=d.verticalScroll&&b>q&&(k>0&&f<i||k<0&&f>0);if(l){n.scrollLeft(e+(j>0?1:-1)*(a-g)/5)}if(m){n.scrollTop(f+(k>0?1:-1)*(b-q)/5)}if(!l&&!m){clearInterval(d.intervalHandle);d.intervalHandle=null}}},Positioning:{isElementInViewport:function(a){if(typeof jQuery==="function"&&a instanceof jQuery){a=a[0]}var b=a.getBoundingClientRect();return(b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth))}},Messages:{displayMessageHtml:function(a){if(typeof a=="string"&&a.length>0){var b=$("#floating-message-window");b.html(a);if($("#floating-message-success").length){$("#floating-message-success").delay(5000).fadeOut()}else{NutcacheShake(b)}return true}return false},displaySuccessMessages:function(a){return Nutcache.Messages.displayMessageHtml('<div id="floating-message-success" class="floating-message"><span class="glyphicons glyphicons-remove-2 floating-message-close-icon"></span><div class="floating-message-container"><span class="glyphicons glyphicons-circle-ok"></span><div class="floating-message-content">'+a+'</div></div></div><div class="clear-float"></div>')},displayErrorMessages:function(a){return Nutcache.Messages.displayMessageHtml('<div id="floating-message-failure" class="floating-message"><span class="glyphicons glyphicons-remove-2 floating-message-close-icon"></span><div class="floating-message-container"><span class="glyphicons glyphicons-circle-remove"></span><div class="floating-message-content">'+a+'</div></div></div><div class="clear-float"></div>')},displayWarningMessages:function(a){return Nutcache.Messages.displayMessageHtml('<div id="floating-message-warning" class="floating-message"><span class="glyphicons glyphicons-remove-2 floating-message-close-icon"></span><div class="floating-message-container"><span class="glyphicons glyphicons-circle-exclamation-mark"></span><div class="floating-message-content">'+a+'</div></div></div><div class="clear-float"></div>')},clearFieldErrors:function(a){a=$(a||document);a.find(".field-validation-error").removeClass("field-validation-error")},displayFieldErrors:function(b,a){a=$(a||document);Nutcache.Messages.clearFieldErrors(a);if(b.Error!=undefined){b.Error.forEach(function(f){var e=f.FieldName.replace(".","").toLowerCase();var d=a.find("input[data-datapath='"+e+"'], textarea[data-datapath='"+e+"'], div.token-field[data-datapath='"+e+"']");if(d.length){var g=kendo.widgetInstance(d);(g?g.wrapper:d).addClass("field-validation-error")}})}},handleAjaxErrors:function(b,a){if(b==undefined){return}if(b.MessageList!=undefined){Nutcache.Messages.displayFieldErrors(b.MessageList,a)}if(b.Messages!=undefined){if(!Nutcache.Messages.displayMessageHtml(b.Messages)){if(typeof b.Content=="string"&&b.Content.length>0){if(b.Content.indexOf("http")==0){window.location=b.Content}else{window.location=GetUrl(b.Content)}}}}}},Images:{displayOrUpload:function(d,b,i,a,g,m,n,h,e,k,f,l){var j={companyId:b,uploadControlName:i,uploadAction:a,displayLogoOnly:g,displayUploadOnly:m,width:n,height:h,cropMode:e,resizeMode:k,displayContainerClass:f,uploadContainerClass:l};Nutcache.Ajax.TryAjaxCall({url:GetUrl("Image")+"RenderLogoUpload",contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(j),dataType:"json",success:function(o){if(o.Content==null){$("#"+d).remove()}else{$("#"+d).html(o.Content);$("#"+d).removeAttr("style")}},error:ManageAjaxError},true)}}});(function(a){a.fn.nutcacheAutoScroll=Nutcache.autoScroll.initializeNutcacheAutoScroll}(jQuery));function GetUrl(a){var d=document.location.href;var b=d.indexOf("#");if(b!=-1){d=d.substring(0,b)}var e=d.split("/");if(e.length>=5){if(e[3].length>=6&&e[4].indexOf("-",2)>0){d=e[0]+"//"+e[2]+"/"+e[3]+"/"+e[4]+"/"+a+"/"}else{if(e[3].length==5&&e[3].indexOf("-",2)>0){d=e[0]+"//"+e[2]+"/"+e[3]+"/"+a+"/"}else{if(e[3]=="b"){d=e[0]+"//"+e[2]+"/"+e[4]+"/"+a+"/"}else{d=e[0]+"//"+e[2]+"/"+a+"/"}}}}else{if(e.length==3){if(e[3].indexOf("-",2)>0){d=e[0]+"//"+e[2]+"/"+e[3]+"/"+a+"/"}else{d=e[0]+"//"+e[2]+"/"+a+"/"}}else{d=e[0]+"//"+e[2]+"/"+a+"/"}}return d}function GetCulture(){var d=document.location.href;var b=d.indexOf("#");if(b!=-1){d=d.substring(0,b)}var a="en-US";var e=d.split("/");if(e.length>=5){if(e[3].length>=6&&e[4].indexOf("-",2)>0){a=e[4]}else{if(e[3].length==5&&e[3].indexOf("-",2)>0){a=e[3]}}}return a}function GetServer(){var b=document.location.href;var a=b.indexOf("#");if(a!=-1){b=b.substring(0,a)}var d=b.split("/");return d[0]+"//"+d[2]}function GetCorporateServer(){var a=GetServer();var b=a.split("/");return b[0]+"//www.nutcache.com"}$(document).ready(function(){$("#floating-message-success").delay(5000).fadeOut();NutcacheShake($("#floating-message-warning"));NutcacheShake($("#floating-message-failure"));Nutcache.Waitingwindow.Close()});function LoadMessagesSection(a,b){if(typeof a=="string"&&a.length>0&&typeof b=="string"&&b.length>0){$(b).html(a);if($("#floating-message-success").length){$("#floating-message-success").delay(5000).fadeOut()}else{NutcacheShake($(b))}return true}return false}function NutcacheShake(a){a.effect("shake",{direction:"up",distance:10,times:3})}function ShowSuccessMessages(a){return LoadMessagesSection('<div id="floating-message-success" class="floating-message"><span class="glyphicons glyphicons-remove-2 floating-message-close-icon"></span><div class="floating-message-container"><span class="glyphicons glyphicons-circle-ok"></span><div class="floating-message-content">'+a+'</div></div></div><div class="clear-float"></div>',"#floating-message-window")}function ShowErrorMessages(a){return LoadMessagesSection('<div id="floating-message-failure" class="floating-message"><span class="glyphicons glyphicons-remove-2 floating-message-close-icon"></span><div class="floating-message-container"><span class="glyphicons glyphicons-circle-remove"></span><div class="floating-message-content">'+a+'</div></div></div><div class="clear-float"></div>',"#floating-message-window")}function ShowWarningMessages(a){return LoadMessagesSection('<div id="floating-message-warning" class="floating-message"><span class="glyphicons glyphicons-remove-2 floating-message-close-icon"></span><div class="floating-message-container"><span class="glyphicons glyphicons-circle-exclamation-mark"></span><div class="floating-message-content">'+a+'</div></div></div><div class="clear-float"></div>',"#floating-message-window")}function ShowErrors(b,a){ClosePopupWindow();if(b.MessageList!=undefined&&b.MessageList.Error!=undefined){a=$(a||document);a.find(".field-validation-error").removeClass("field-validation-error");b.MessageList.Error.forEach(function(f){var e=f.FieldName.replace(".","").toLowerCase();var d=a.find("input[data-datapath='"+e+"'], textarea[data-datapath='"+e+"']");if(d.length){var g=kendo.widgetInstance(d);(g?g.wrapper:d).addClass("field-validation-error")}})}if(typeof b!="undefined"&&typeof b.Messages!="undefined"){if(!LoadMessagesSection(b.Messages,"#floating-message-window")){if(typeof b.Content=="string"&&b.Content.length>0){if(b.Content.indexOf("http")==0){window.location=b.Content}else{window.location=GetUrl(b.Content)}}}}}function CreateGuid(){var d=[];var a="0123456789abcdef";for(var b=0;b<36;b++){d[b]=a.substr(Math.floor(Math.random()*16),1)}d[14]="4";d[19]=a.substr((d[19]&3)|8,1);d[8]=d[13]=d[18]=d[23]="-";var e=d.join("");return e}function htmlEncode(b){var a=document.createElement("div");if(b){a.innerText=a.textContent=b;return a.innerHTML}return b}function GetURLParameter(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var d="[\\?&]"+a+"=([^&#]*)";var b=new RegExp(d);var e=b.exec(window.location.href);if(e==null){return""}else{return e[1]}}function css_browser_selector(l){var n=l.toLowerCase(),f=function(b){return n.indexOf(b)>-1},d="gecko",p="webkit",k="safari",j="opera",i="mobile",e=document.documentElement,a=[(!(/opera|webtv/i.test(n))&&/msie\s(\d)/.test(n))?("ie ie"+RegExp.$1):f("firefox/2")?d+" ff2":f("firefox/3.5")?d+" ff3 ff3_5":f("firefox/3.6")?d+" ff3 ff3_6":f("firefox/3")?d+" ff3":f("gecko/")?d:f("opera")?j+(/version\/(\d+)/.test(n)?" "+j+RegExp.$1:(/opera(\s|\/)(\d+)/.test(n)?" "+j+RegExp.$2:"")):f("konqueror")?"konqueror":f("blackberry")?i+" blackberry":f("android")?i+" android":f("chrome")?p+" chrome":f("iron")?p+" iron":f("applewebkit/")?p+" "+k+(/version\/(\d+)/.test(n)?" "+k+RegExp.$1:""):f("mozilla/")?d:"",f("j2me")?i+" j2me":f("iphone")?i+" iphone":f("ipod")?i+" ipod":f("ipad")?i+" ipad":f("mac")?"mac":f("darwin")?"mac":f("webtv")?"webtv":f("win")?"win"+(f("windows nt 6.0")?" vista":""):f("freebsd")?"freebsd":(f("x11")||f("linux"))?"linux":"","js"];c=a.join(" ");e.className+=" "+c;return c}css_browser_selector(navigator.userAgent);$(".event-log-clear").click(function(a){a.preventDefault();$(this).next(".event-log").html("")});$(window).resize(function(a){$(".k-animation-container").hide()});$(document).ajaxStart(function(){Nutcache.Ajax.InProgress=true}).ajaxComplete(function(){Nutcache.Ajax.InProgress=false}).ajaxError(function(){Nutcache.Ajax.InProgress=false});$.ajaxSetup({cache:false});function ManageAjaxError(b,d,a){Nutcache.Waitingwindow.Hide();if(b.status==200){RedirectToLoginPage()}}function RedirectToLoginPage(){var a=GetUrl("Account")+"LogOnAfterTimeOut";window.location.replace(a)}function getCurrencyFormat(){return $("#currencyFormat").val()||"{0:N2}"}function getDateFormat(){return $("#dateFormat").val()||"{0:yyyy-MM-dd}"}function getDateTimeFormat(){return $("#dateTimeFormat").val()||"{0:yyyy-MM-dd HH:mm}"}function getISODateTimeFormat(){return"{0:yyyy-MM-dd HH:mm:ss}"}function getTimeFormat(){return $("#timeFormat").val()||"{0:HH:mm}"}function stringIsBlank(a){return(!a||/^\s*$/.test(a))}function applyActiveBoxFade(b){var a=$(b).find(".nc-box").addBack(".nc-box");a.addClass("nc-active-box");setTimeout(function(){a.addClass("nc-fading-box").removeClass("nc-active-box");setTimeout(function(){a.removeClass("nc-fading-box")},500)},0)}var NutcacheAds={RedirectToTrial:function(a){var b=NutcacheAds.TryProUrl;if(b!=undefined){if(a!=undefined&&a){window.open(b)}else{window.location=b}}},RedirectToCart:function(a){var d=NutcacheAds.EditProUrl;if(d!=undefined){var b="";if(a!=undefined&&a!=""){b="?promoCode="+a}window.location=d+b}}};var ActionMenuFunctions={onActionMenuOpen:function(d){var i=$(d.item);var h=i.data("kendoContextMenu");var j=$(d.event.currentTarget);var g=d.event.type=="click";if(h.nutcacheData!=undefined&&h.nutcacheData.latestTarget[0]==j[0]&&i.is(":visible")){d.preventDefault();return false}if(h.nutcacheData!=undefined){h.nutcacheData.cleanup()}var a=j.data("action-menu-configuration");ActionMenuFunctions.applyConfig(i,a);var b={onMouseEnter:function(){b.openMenuCount++},onMouseLeave:function(){b.openMenuCount--;clearTimeout(b.closingTimeout);b.closingTimeout=setTimeout(function(){if(b.openMenuCount==0&&h.nutcacheData==b){h.close()}},200)},setup:function(){if(!b.isFromClick){h.popup.element.on("mouseenter",b.onMouseEnter);h.popup.element.on("mouseleave",b.onMouseLeave);j.on("mouseenter",b.onMouseEnter);j.on("mouseleave",b.onMouseLeave)}h.one("close",b.cleanup);j.css("visibility","visible");j.css("opacity","1")},cleanup:function(){if(!b.isFromClick){j.unbind("mouseenter",b.onMouseEnter);j.unbind("mouseleave",b.onMouseLeave);h.popup.element.unbind("mouseenter",b.onMouseEnter);h.popup.element.unbind("mouseleave",b.onMouseLeave)}j.css("visibility","");j.css("opacity","");h.trigger("close");delete h.nutcacheData},isFromClick:g,latestTarget:j,openMenuCount:1};h.nutcacheData=b;h.nutcacheData.setup();var f=getFunctionWithName(a.openHandler);if(f!=null){f.call(i,a)}return true},applyConfig:function(e,a){var b=e.data("kendoContextMenu");var f=e.find("> .k-item");var d=$({});e.data("recordId",a.recordId);$.each(f,function(i,k){var j=$(k);if(d==null&&j.hasClass("k-separator")){d=j;j.removeClass("nc-hidden-menu");return}var g=a.actions[k.id];if(g!=undefined&&g.showMenu){var h=getFunctionWithName(g.functionName);if(h!=null){var l=function(){h.call(k,{menu:e,menuData:e.data("nutcacheActionMenuConfig"),config:g,recordId:a.recordId,recordVersion:a.recordVersion})};j.bind("click",l);b.one("close",function(){j.unbind("click",l)})}j.removeClass("nc-hidden-menu");d=null}else{j.addClass("nc-hidden-menu")}});if(d!=null){d.addClass("nc-hidden-menu")}}};var NutcacheLogoUploadFunctions={initializeNutcacheLogoUpload:function(a){if(a==undefined){return $($(this).data("kendoUpload")).data("nutcacheLogoUploadData")}this.each(function(b,f){var d=$(f);var e=d.data("kendoUpload");$(e).data("nutcacheLogoUploadData",a)});return this},validateLogoForUpload:function(a){var d=a.sender.element.nutcacheLogoUpload();var b=a.files;$.each(b,function(){if(this.size>d.sizeLimit.maxFileSize){ShowErrorMessages(d.sizeLimit.message);a.preventDefault();return false}var e=this.extension.toLowerCase();if(d.acceptedFileTypes.fileTypes.indexOf(e)==-1){ShowErrorMessages(d.acceptedFileTypes.message);a.preventDefault();return false}})},uploadSuccess:function(a){if(a.response.status=="ok"){window.location.href=window.location.href.split("#")[0]}else{ShowErrorMessages(a.response.statusMsg)}},uploadTempSuccess:function(a){if(a.response.status=="ok"){var b=$("#company-edit-form-temp-logo");b.attr("data-temporaryFileKey",a.response.temporaryFileKey);b.attr("src",a.response.temporaryUrl);b.show();$("#OrganizationEditPopup .nutcache-upload-logo").hide()}else{ShowErrorMessages(a.response.statusMsg)}},uploadError:function(a){ShowErrorMessages(a.response.statusMsg)}};(function(a){a.fn.nutcacheLogoUpload=NutcacheLogoUploadFunctions.initializeNutcacheLogoUpload;if(window.delayedPluginCalls!=undefined&&window.delayedPluginCalls.nutcacheLogoUploadCalls!=undefined){window.delayedPluginCalls.nutcacheLogoUploadCalls.forEach(function(b){NutcacheLogoUploadFunctions.initializeNutcacheLogoUpload.apply(b.target,b.params)})}}(jQuery));$(document).on("click",".k-overlay",function(a){var b=$(".k-window-content.k-content",$(this).next("div.k-widget.k-window"));if(b==null||b.length==0){return}b.data("kendoWindow").close();a.stopImmediatePropagation()});$(document).click(function(a){if($(a.target).closest(".inmplayer-panel").length==0&&$(a.target).closest(".inmplayer-trigger").length==0&&$(".inmplayer-panel").is(":visible")){$(".inmplayer-panel-close-button").trigger("click")}});var NutcacheWeekPickerFunctions={initializeWeekPickers:function(){var b=$(".k-input.nc-week-picker");if(b.length){var d=kendo.widgetInstance(b);var a=d._events.change;d.unbind("change");d.bind("change",function(f){NutcacheWeekPickerFunctions.onChange(f,a)});d.one("open",function(f){$(".k-widget.k-calendar",f.sender.dateView.popup.element).addClass("nc-week-picker");$(".k-footer a.k-nav-today",f.sender.dateView.popup.element).text(f.sender.element.data("currentweek"))})}},onChange:function(b,a){moment.locale(GetCulture());var g=moment(b.sender.value()).startOf("week").toDate();var f=moment(g).add(6,"day").toDate();b.sender.value(g);if(a){for(var d=0;d<a.length;d++){a[d].apply(this,[b,g,f])}}}};