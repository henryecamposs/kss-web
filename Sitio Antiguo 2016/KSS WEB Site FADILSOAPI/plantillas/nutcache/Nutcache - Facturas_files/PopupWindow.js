var PopupWindowFunctions={openPopupWindow:function(e,d,b,a,c){Nutcache.Waitingwindow.Show();Nutcache.Ajax.TryAjaxCall({url:e,contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",data:c!=null?JSON.stringify(c):null,success:function(f){Nutcache.Waitingwindow.Hide();if(!f.IsSaved){LoadMessagesSection(f.Messages,"#floating-message-window");return}var h=$("<div>").addClass("nc-popup-window");$("body").append(h);h.kendoWindow({modal:true,deactivate:function(i){h.remove()},close:function(i){if(jQuery.isFunction(b)){b(i)}},activate:a,visible:false,resizable:false,scrollable:false});var g=h.data("kendoWindow");if(jQuery.isFunction(d)){g.saveFunction=d}g.content(f.Content);g.title(f.Title);g.center().open()},error:ManageAjaxError})},refreshPopupWindowContent:function(b,c,a){Nutcache.FloatingMessage.Close();Nutcache.Waitingwindow.Show();Nutcache.Ajax.TryAjaxCall({url:c,contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",success:function(e){Nutcache.Waitingwindow.Hide();if(!e.IsSaved){LoadMessagesSection(e.Messages,"#floating-message-window");return}var d=b.data("kendoWindow");d.content(e.Content);if(jQuery.isFunction(a)){a()}},error:ManageAjaxError})},savePopupWindow:function(a){var b=$(a).closest(".k-window-content").data("kendoWindow");if(jQuery.isFunction(b.saveFunction)){b.saveFunction(b)}},cancelPopupWindow:function(a){var b=$(a).closest(".k-window-content").data("kendoWindow");b.close();Nutcache.FloatingMessage.Close()},getPopupWindow:function(c,a,b){var d=null;$(".nc-popup-window").each(function(){d=$(this);var f=$("#"+c,d).length>0;var e=true;if(a!=null){e=$("#"+a,d).val()==b}d=f&&e?$(this):null});return d}};function GetWindowObject(a){return $((typeof a=="undefined")?"#popup-window":a).data("kendoWindow")}function PopupWindow(e,d,h,c,f,b,g){var a=typeof b!="undefined"?b:"GetView";var i=GetUrl(d)+a+"/"+e;Nutcache.Waitingwindow.Show();if(f!=null){i=i+"?"+$.param(f)}Nutcache.FloatingMessage.Close();Nutcache.Ajax.TryAjaxCall({url:i,contentType:"application/json; charset=utf-8",type:"POST",data:e,dataType:"json",success:function(j){Nutcache.Waitingwindow.Hide();if(j.IsRedirect){ShowErrors(j)}else{var k=GetWindowObject();if(jQuery.isFunction(c)){k.cancelFunction=c}else{if(jQuery.isFunction(k.cancelFunction)){k.cancelFunction=null}}if(jQuery.isFunction(h)){k.saveFunction=h}else{if(jQuery.isFunction(k.saveFunction)){k.saveFunction=null}}k.content(j.Content);k.title(j.Title);k.center().open();if(jQuery.isFunction(g)){g()}}},error:ManageAjaxError})}function PopupWindowGet(e,d,h,c,f,b,g){var a=typeof b!="undefined"?b:"GetView";var i=GetUrl(d)+a+"/"+e;Nutcache.Waitingwindow.Show();if(f!=null){i=i+"?"+$.param(f)}Nutcache.Ajax.TryAjaxCall({url:i,contentType:"application/json; charset=utf-8",type:"GET",data:e,dataType:"json",success:function(j){Nutcache.Waitingwindow.Hide();if(j.IsRedirect){ShowErrors(j)}else{var k=GetWindowObject();if(jQuery.isFunction(c)){k.cancelFunction=c}else{if(jQuery.isFunction(k.cancelFunction)){k.cancelFunction=null}}if(jQuery.isFunction(h)){k.saveFunction=h}else{if(jQuery.isFunction(k.saveFunction)){k.saveFunction=null}}k.content(j.Content);k.title(j.Title);k.center().open();if(jQuery.isFunction(g)){g()}}},error:ManageAjaxError})}function ClosePopupWindow(b){var a=GetWindowObject(b);a.close();Nutcache.FloatingMessage.Close();return false}function CancelPopupWindow(){var a=GetWindowObject();if(jQuery.isFunction(a.cancelFunction)){if(a.cancelFunction(a)){ClosePopupWindow()}}else{ClosePopupWindow()}Nutcache.FloatingMessage.Close();return false}function SavePopupWindow(){var a=GetWindowObject();if(jQuery.isFunction(a.saveFunction)){if(a.saveFunction(a)){ClosePopupWindow()}}else{ClosePopupWindow()}return false}function UpdatePopupWindowContent(a,c){var b=GetWindowObject(c);if(a.Messages!="undefined"){LoadMessagesSection(a.Messages,"#floating-message-window")}b.content(a.Content)}function ReplacePopupWindowContent(a){var b=GetWindowObject();if(a.Title!="undefined"){b.title(a.Title)}b.content(a.Content)}function PopupListReportWindow(b,a,d){var e=GetUrl(b)+a+"/";var c=d;Nutcache.Waitingwindow.Show();if((typeof d=="undefined")||d==""){c={dateStart:Nutcache.Dates.ToISODateString(Nutcache.Dates.YearFirstDay()),dateEnd:Nutcache.Dates.ToISODateString(Nutcache.Dates.Today())}}Nutcache.Ajax.TryAjaxCall({url:e,contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(c),dataType:"json",traditional:true,success:function(f){Nutcache.Waitingwindow.Hide();if(f.IsRedirect){LoadMessagesSection(f.Messages,"#floating-message-window")}else{var g=GetWindowObject();g.cancelFunction=null;g.saveFunction=null;if(typeof d!=="undefined"&&!d.firstLoad){$("#reportViewerSection").html(f.Content)}else{g.content(f.Content);g.title(f.Title);g.refresh();g.center().open();if((typeof $("#DateFrom")!=="undefined")&&(typeof $("#DateFrom").data("tDatePicker")!=="undefined")){$("#DateFrom").data("tDatePicker").value(Nutcache.Dates.YearFirstDay())}if((typeof $("#DateTo")!=="undefined")&&(typeof $("#DateTo").data("tDatePicker")!=="undefined")){$("#DateTo").data("tDatePicker").value(new Date())}}}},error:ManageAjaxError})}function openYouTubePopup(b,d){var a="<iframe width='853' height='480' src='https://www.youtube.com/embed/{0}?autoplay=1&rel=0' frameborder='0' allowfullscreen></iframe>";a=a.replace("{0}",d);var c=$("#YouTubePopupWindow").data("kendoWindow");c.title(b);c.content(a);c.center();c.open()}function onYouTubePopupOpen(){}function onYouTubePopupClose(){var a=$("#YouTubePopupWindow").data("kendoWindow");a.content("")};