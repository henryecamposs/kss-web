function SaveSupport(){var a="CreateSupportTicket";var b=GetSupportData();if(typeof b!=="undefined"){Nutcache.Ajax.TryAjaxCall({url:GetSupportUrl()+a+"/",contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(b),dataType:"json",success:SupportTicketSubmitSuccess,error:ManageAjaxError})}}function PopupSupportWindow(b,d,a){var c=null;PopupWindowGet(b,"Support",d,a,c,"GetSupportView",PopupSupportWindow_onSuccess)}function PopupSupportWindow_onSuccess(){if($("#supportSearchTerms").val()!=""){$("#popup-window #keyword").val($("#supportSearchTerms").val())}PerformKnowledgeBaseSearch()}function PerformKnowledgeBaseSearch(){var a=$("#popup-window #keyword").val();if(a.length>1){Nutcache.Ajax.QueueAjaxCall($("#popup-window #keyword"),{url:GetSupportUrl()+"Search?searchTerm="+encodeURIComponent(a),type:"GET",data:0,dataType:"json",success:function(b){displayResults(b.Content,a)},error:ManageAjaxError},300,displayLoadingResults)}else{Nutcache.Ajax.ClearAjaxQueue($("#popup-window #keyword"));displayBrowseHelp()}}function displayResults(b,d){var c=$("#quicksearch-edit-form-results");var a=$("#quicksearch-edit-form-browse-help a");var e=$("#quicksearch-edit-form-show-more a");c.html(b);e.attr("href",e.attr("data-url-pattern")+d);e.parent().removeClass("hidden");a.parent().addClass("hidden")}function displayBrowseHelp(){var b=$("#quicksearch-edit-form-results");var a=$("#quicksearch-edit-form-browse-help a");var c=$("#quicksearch-edit-form-show-more a");b.html("");c.parent().addClass("hidden");a.parent().removeClass("hidden")}function displayLoadingResults(){var b=$("#quicksearch-edit-form-results");var a=$("#quicksearch-edit-form-browse-help a");var c=$("#quicksearch-edit-form-show-more a");b.html("");c.parent().addClass("hidden");a.parent().addClass("hidden")}function OpenSupportWindow(b,d,a,c){var e=GetSupportUrl()+"GetSupportView/"+b;if(c!=null){e=e+"?"+$.param(c)}Nutcache.Ajax.TryAjaxCall({url:e,contentType:"application/json; charset=utf-8",type:"GET",dataType:"json",async:false,success:function(f){if(f.IsRedirect){ShowErrors(f)}else{var g=GetWindowObject();if(jQuery.isFunction(a)){g.cancelFunction=a}else{if(jQuery.isFunction(g.cancelFunction)){g.cancelFunction=null}}if(jQuery.isFunction(d)){g.saveFunction=d}else{if(jQuery.isFunction(g.saveFunction)){g.saveFunction=null}}g.content(f.Content);g.title(f.Title);g.center().open()}},error:ManageAjaxError})}function SaveContact(){var b=$("#popup-window  #ID").val();var a="CreateContactTicket";var c=GetSupportData();if(typeof c!=="undefined"){Nutcache.Ajax.TryAjaxCall({url:GetSupportUrl()+a+"/",contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(c),dataType:"json",success:SupportTicketSubmitSuccess,error:ManageAjaxError})}}function PopupContactWindow(b,d,a){var c=null;PopupWindow(b,"Support",d,a,c,"GetContactView")}function SupportTicketSubmitSuccess(a){if(a.IsRedirect){ShowErrors(a)}else{if(a.IsSaved){ClosePopupWindow();LoadMessagesSection(a.Messages,"#floating-message-window")}else{UpdatePopupWindowContent(a)}}}function GetSupportData(){var a={Name:$("#popup-window  #Name").val(),Email:$("#popup-window  #Email").val(),Topic:$("#popup-window  #Topic").val(),Subject:$("#popup-window  #Subject").val(),Description:$("#popup-window  #Description").val()};return a}function GetSupportUrl(){var a="Support";var d=document.location.href;var b="en-CA";var c=d.indexOf("#");if(c!=-1){d=d.substring(0,c)}var e=d.split("/");if(e.length>=5){if(e[3].length>=6&&e[4].indexOf("-",2)>0){d=e[0]+"//"+e[2]+"/"+e[3]+"/"+e[4]+"/"+a+"/"}else{if(e[3].length==5&&e[3].indexOf("-",2)>0){d=e[0]+"//"+e[2]+"/"+e[3]+"/"+a+"/"}else{d=e[0]+"//"+e[2]+"/"+a+"/"}}}else{if(e.length==4){if(e[3].indexOf("-",2)>0){d=e[0]+"//"+e[2]+"/"+e[3]+"/"+a+"/"}else{d=e[0]+"//"+e[2]+"/"+b+"/"+a+"/"}}else{d=e[0]+"//"+e[2]+"/"+b+"/"+a+"/"}}return d}function SubmitSupport(){Nutcache.Form.TrySubmit(document.forms[0])};